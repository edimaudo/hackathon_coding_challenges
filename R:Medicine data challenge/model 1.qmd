---
title: "MMR Vaccination & Measles Outcomes: A 2025 Analysis"
author: "Edima Udo"
date: "2025-05-05"
format:
  html:
    toc: true
    toc-depth: 3
    theme: cosmo
    code-fold: true
    code-tools: true
editor: visual
---

```{r setup, include=FALSE}
library(tidyverse)
library(plotly)
library(lubridate)
library(readr)
library(janitor)
```

## Introduction

Changing attitudes towards vaccination have led to declining MMR coverage, putting herd immunity at risk. This document explores trends in vaccination, outbreaks, and outcomes using data from the 2025 R/Medicine Challenge.

## 1. Global and US MMR Vaccination Coverage Trends

```{r load-global-coverage}
global_coverage <- read_csv("https://raw.githubusercontent.com/fbranda/measles/main/Measles_vaccination_coverage_Global.csv") %>%
  clean_names()
```

```{r global-coverage-plot}
global_plot <- global_coverage %>%
  filter(year >= 2000) %>%
  plot_ly(x = ~year, y = ~coverage, color = ~country,
          type = 'scatter', mode = 'lines') %>%
  layout(title = "Global MMR 1st Dose Coverage Over Time",
         xaxis = list(title = "Year"),
         yaxis = list(title = "% Coverage"))
global_plot
```

```{r load-us-coverage}
us_coverage <- read_csv("https://raw.githubusercontent.com/fbranda/measles/main/USA/data/all/measles-USA-by-mmr-coverage.csv") %>%
  clean_names()
```

```{r us-coverage-plot}
us_plot <- us_coverage %>%
  filter(year >= 2000) %>%
  plot_ly(x = ~year, y = ~coverage_percent, color = ~state,
          type = 'scatter', mode = 'lines') %>%
  layout(title = "US MMR Coverage by State Over Time",
         xaxis = list(title = "Year"),
         yaxis = list(title = "% Coverage"))
us_plot
```

## 2. Measles Case Trends Over Time and Space

```{r load-us-onset}
us_onset <- read_csv("https://raw.githubusercontent.com/fbranda/measles/main/USA/data/all/measles-USA-by-onset-date.csv") %>%
  clean_names()
```

```{r us-onset-timeline}
onset_timeline <- us_onset %>%
  mutate(date_onset = ymd(date_onset)) %>%
  group_by(date_onset) %>%
  summarise(cases = sum(cases, na.rm = TRUE)) %>%
  plot_ly(x = ~date_onset, y = ~cases, type = 'scatter', mode = 'lines') %>%
  layout(title = "US Measles Cases by Onset Date",
         xaxis = list(title = "Date"),
         yaxis = list(title = "Cases"))
onset_timeline
```

## 3. Vaccination vs. Measles Cases Correlation

```{r load-us-state-timeline}
us_state_cases <- read_csv("https://raw.githubusercontent.com/fbranda/measles/main/USA/data/2025/measles-USA-by-state-timeline.csv") %>%
  clean_names()
```

```{r state-summary}
state_summary <- us_coverage %>%
  inner_join(us_state_cases, by = c("state", "year")) %>%
  group_by(state) %>%
  summarise(avg_coverage = mean(coverage_percent, na.rm = TRUE),
            total_cases = sum(cases, na.rm = TRUE))
```

```{r correlation-plot}
correlation_plot <- state_summary %>%
  plot_ly(x = ~avg_coverage, y = ~total_cases, text = ~state,
          type = 'scatter', mode = 'markers') %>%
  layout(title = "MMR Coverage vs. Measles Cases by State",
         xaxis = list(title = "Average % Coverage (2000â€“2025)"),
         yaxis = list(title = "Total Cases (2025)"))
correlation_plot
```

## 4. Age-Specific Risk Analysis

```{r load-age-data}
age_data <- read_csv("https://raw.githubusercontent.com/fbranda/measles/main/USA/data/2025/measles-USA-by-age.csv") %>%
  clean_names()
```

```{r age-risk-bar}
age_bar <- age_data %>%
  plot_ly(x = ~age_group, y = ~cases, type = 'bar') %>%
  layout(title = "Measles Cases by Age Group (2025)",
         xaxis = list(title = "Age Group"),
         yaxis = list(title = "Cases"))
age_bar
```

## 5. Outcome Severity Trends

```{r load-us-year}
us_year <- read_csv("https://raw.githubusercontent.com/fbranda/measles/main/USA/data/all/measles-USA-by-year.csv") %>%
  clean_names()
```

```{r outcomes-over-time}
outcome_plot <- us_year %>%
  plot_ly(x = ~year) %>%
  add_trace(y = ~cases, name = 'Cases', type = 'scatter', mode = 'lines') %>%
  add_trace(y = ~deaths, name = 'Deaths', type = 'scatter', mode = 'lines') %>%
  add_trace(y = ~complications, name = 'Complications', type = 'scatter', mode = 'lines') %>%
  layout(title = "Measles Outcomes in the US Over Time",
         xaxis = list(title = "Year"),
         yaxis = list(title = "Count"))
outcome_plot
```

## Conclusion

This exploratory analysis highlights concerning trends in MMR vaccination and measles resurgence in 2025. Low vaccination coverage correlates strongly with increased outbreak risk. Continued monitoring and policy support are essential to protect public health.
